monitors:
- dimensions:
  doc: |
    Monitors Tomcat using the Collectd GenericJMX plugin. This is essentially a wrapper around 
    the [collectd-genericjmx](./collectd-genericjmx.md)[](sfx_link:java) monitor that comes with 
    a set of predefined MBean definitions that a standard Tomcat deployment will expose.

    <!--- SETUP --->
    ### Enabling JMX Remote

    You must enable JMX Remote on Tomcat. 
    See [official documentation](https://tomcat.apache.org/tomcat-7.0-doc/monitoring.html#Enabling_JMX_Remote).

  metrics:
    # Taken from genericjmx monitor. If you want to change them update genericjmx and update
    # all other monitors that use genericjmx with this same notice.
    ### BEGIN JVM METRICS ###
    gauge.jvm.threads.count:
      description: Number of JVM threads
      group: jvm
      default: true
      type: gauge
    gauge.loaded_classes:
      description: Number of classes loaded in the JVM
      group: jvm
      default: true
      type: gauge
    invocations:
      description: Total number of garbage collection events
      group: jvm
      default: true
      type: cumulative
    jmx_memory.committed:
      description: Amount of memory guaranteed to be available in bytes
      group: jvm
      default: true
      type: gauge
    jmx_memory.max:
      description: Maximum amount of memory that can be used in bytes
      group: jvm
      default: true
      type: gauge
    jmx_memory.used:
      description: Current memory usage in bytes
      group: jvm
      default: true
      type: gauge
    total_time_in_ms.collection_time:
      description: Amount of time spent garbage collecting in milliseconds
      group: jvm
      default: true
      type: cumulative
    jmx_memory.init:
      description: Amount of initial memory at startup in bytes
      group: jvm
      default: true
      type: gauge
    ### END JVM METRICS ###

    gauge.tomcat.ThreadPool.maxThreads:
      description: |
        The maximum number of threads to be created by the 
        connector and made available for requests.
      default: true
      type: gauge
    gauge.tomcat.ThreadPool.currentThreadsBusy:
      description: |
        The number of threads currently processing requests.
      default: true
      type: gauge
    gauge.tomcat.UtilityExecutor.activeCount:
      description: |
        The number of active threads in the thread pool.
      default: false
      type: gauge
    gauge.tomcat.UtilityExecutor.maximumPoolSize:
      description: |
        The maximum number of threads available in the thread pool.
      default: false
      type: gauge
    counter.tomcat.GlobalRequestProcessor.bytesSent:
      description: |
        Bytes per second sent by all the request processors.
      default: true
      type: cumulative
    counter.tomcat.GlobalRequestProcessor.bytesReceived:
      description: |
        Bytes per second received by all request processors.
      default: true
      type: cumulative
    counter.tomcat.GlobalRequestProcessor.errorCount:
      description: |
        The number of errors generated by server requests.
      default: true
      type: cumulative
    counter.tomcat.GlobalRequestProcessor.requestCount:
      description: |
        The number of requests across all connectors.
      default: true
      type: cumulative
    gauge.tomcat.GlobalRequestProcessor.maxTime:
      description: |
        The total time to process all incoming requests, in milliseconds.
      default: true
      type: gauge
    counter.tomcat.GlobalRequestProcessor.processingTime:
      description: |
        The longest time it takes to process a single incoming request, in milliseconds.
      default: true
      type: cumulative
    
  monitorType: collectd/tomcat
  sendUnknown: true
  noneIncluded: true
  properties:
